<div class="modal-header">
    <h4 class="modal-title">{{ mode === 'add' ? 'Add User' : 'Edit User' }}</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="onCancel()"></button>
</div>

<form [formGroup]="userForm" (ngSubmit)="onSubmit()">
    <div class="modal-body">
        <div class="row">
            <div class="col-md-6 mb-3" *ngIf="mode === 'add'">
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" class="form-control" formControlName="userName" placeholder="Enter email" />
                    <div *ngIf="userForm.get('userName')?.invalid && userForm.get('userName')?.touched" class="text-danger">
                        Valid email is required
                    </div>
                </div>
            </div>

            <div class="col-md-6 mb-3" *ngIf="mode === 'add'">
                <div class="form-group">
                    <label for="password">Password</label>
                    <div class="input-group">
                        <input [type]="showPassword ? 'text' : 'password'" id="password" class="form-control" formControlName="password" placeholder="Enter password" />
                        <div class="input-group-append">
                            <span class="input-group-text" (click)="togglePasswordVisibility()" style="cursor: pointer;">
                                <mat-icon>{{ showPassword ? 'visibility' : 'visibility_off' }}</mat-icon>
                            </span>
                        </div>
                    </div>
                    <div *ngIf="userForm.get('password')?.invalid && userForm.get('password')?.touched" class="text-danger">
                        Password is required
                    </div>
                </div>
            </div>

            <div class="col-md-6 mb-3">
                <div class="form-group">
                    <label>First Name</label>
                    <input type="text" class="form-control" formControlName="firstName" placeholder="Enter first name" />
                    <div *ngIf="userForm.get('firstName')?.invalid && userForm.get('firstName')?.touched" class="text-danger">
                        First name is required
                    </div>
                </div>
            </div>

            <div class="col-md-6 mb-3">
                <div class="form-group">
                    <label>Last Name</label>
                    <input type="text" class="form-control" formControlName="lastName" placeholder="Enter last name" />
                    <div *ngIf="userForm.get('lastName')?.invalid && userForm.get('lastName')?.touched" class="text-danger">
                        Last name is required
                    </div>
                </div>
            </div>

            <div class="col-md-6 mb-3">
                <div class="form-group">
                    <label>Role</label>
                    <select class="form-control" formControlName="role">
                        <option value="" disabled>Select role</option>
                        <option *ngFor="let roleOption of roles" [value]="roleOption">{{ roleOption | uppercase}}</option>
                    </select>
                    <div *ngIf="userForm.get('role')?.invalid && userForm.get('role')?.touched" class="text-danger">
                        Role is required
                    </div>
                </div>
            </div>

            <div class="col-md-6 mb-3">
                <div class="form-group">
                    <label>Phone</label>
                    <input type="text" class="form-control" formControlName="phone" placeholder="Enter phone number" />
                    <div *ngIf="userForm.get('phone')?.invalid && userForm.get('phone')?.touched" class="text-danger">
                        Valid phone number is required
                    </div>
                </div>
            </div>

            <div class="col-md-6 mb-3">
                <div class="form-group">
                    <label>Status</label>
                    <div class="form-check form-switch mt-2">
                        <input type="checkbox" class="form-check-input" formControlName="status" (change)="toggleStatus()" />
                        <label class="form-check-label">{{ userForm.get('status')?.value ? 'Active' : 'Inactive' }}</label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="onCancel()">Cancel</button>
        <button type="submit" class="btn btn-primary">{{ mode === 'add' ? 'Add' : 'Update' }}</button>
    </div>
</form>